# Web Worker (웹 워커)
![[Pasted image 20231215143840.png]]
Web Worker를 사용하지 않았을 때에는 UI 동작과 데이터 핸들링이 순차적인 방식으로 처리가 되는 반면, Web Worker를 사용하면 병렬 처리가 가능하다. 그러므로 성능 향상을 기대할 수 있다.

Web Worker는 브라우저의 Main Thread와 별개로 작동되는 Thread를 생성할 수 있다.

Web Worker로 생성한, Thread는 브라우저 렌더링 같은 Main Thread의 작업을 방해하지 않고, 새로운 Thread에서 스크립트를 실행하는 간단한 방법을 제공한다.

![[Pasted image 20231215144826.png]]
## Web Worker를 사용하지 않는 이유
이처럼 Web Worker가 많은 장점이 있는데 잘 사용되지 않는 이유는 다음과 같다.

1. 서버에서 대부분의 데이터를 처리하게 때문에 굳이 Web Worker를 사용하게 될 일이 없다. (Web Worker를 사용할 만큼 부하가 걸리는 작업을 안 함)
2. DOM 제어 및 Window 객체의 일부 함수가 Main Thread에서만 가능하고 Web Worker에서는 사용이 불가능한 부분이 있다.
3. 단순 계산식에서는 Web Worker를 사용하지 않는 것이 더 빠르기도 하고, 메인 스레드와 Web Worker 간 데이터 전송 시에는 비용이 발생하기 때문이다.
## Web Worker를 사용하는 경우
반면, Web Worker를 사용하는 경우는 다음과 같다.

1. 화면 동작에 영향을 미치는 연산 동작, 즉, 바이너리 파일 핸들링이나 복잡한 계산이 필요한 경우에 유용하다.
2. 백그라운드에서 지속적인 작업을 해야 하거나 메인 스레드 영향을 미치지 않고 작업을 하는 경우에 유용하게 사용될 수 있다.
3. 멀티 스레드로 개발했을 때 사용자 환경 개선에 도움이 되는 경우로 볼 수 있다. 싱글 페이지 애플리케이션으로 개발되는 프로젝트라면, 사용했을 때 도움이 되는 부분이 있을 것으로 생각된다.

# Service Worker (서비스 워커)
서비스워커는 브라우저가 백그라운드에서 실행하는 스크립트로, 웹페이지와는 별개로 작동하며 웹페이지 또는 사용자의 인터랙션이 필요하지 않은 기능만 제공하고 있다.

서비스워커 설정과 Web App Manifest설정을 추가한다면 간단하게 [PWA](https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps)를 구성할 수도 있다.

서비스워커의 수명 주기는 웹페이지와는 **완전히 별개이다.** 웹 서비스와 브라우저 및 네트워크 사이에서 프록시 서버의 역할을 하며, 오프라인에서도 서비스를 사용할 수 있도록 한다.

웹 페이지와 별개로 존재하기 때문에 다음과 같은 제약이 있다.

1. 서비스워커는 요청하지 않는 이상, 없는 것이나 다름없다. [Web Worker](https://developer.mozilla.org/ko/docs/Web/API/Web_Workers_API)에서와 같은 `.ternimate()` 명령은 존재하지 않는다.
2. 웹 페이지 life cycle을 따르지 않는다. 서비스워커는 웹페이지가 닫히더라도 자동으로 비활성화되지 않는다.
3. 웹 페이지와 별개로 존재하므로 DOM이나 window요소에 접근할 수 없다.

위 제약을 고려했을 때, 서비스워커는 다음과 같이 활용할 수 있다.

1. 캐시와 상호작용
2. 푸쉬 알림
3. 백그라운드 동기
### 1. 캐시와 상호작용
![[Pasted image 20231215163844.png]]

`fetch` 이벤트의 중간자 역할로 사용할 수 있다. 이 경우 서비스워커는 HTTP를 통해 정보를 요청하는 대신 가지고 있는 캐시에서 자료를 전달한다. 캐시가 삭제되지 않는 한 브라우저는 인터넷 연결 없이도 정보를 보여줄 수 있다.

### 2. 푸쉬 알림
![push-notification](https://so-so.dev/static/a702ecf436947e93044133fc5efbfdfb/c1b63/push-notification.png "push-notification")

브라우저 창이 닫힌 상태에서도 동작하므로, 푸시 알람을 구현할 수 있다.

### 3. 백그라운드 동기화
![[Pasted image 20231215163926.png]]
채팅 메시지 또는 사진 업로드 등의 작업 도중 컴퓨터가 오프라인 상태가 되는 경우 온라인 상태가 되었을 때 해당 작업을 마저 완료할 수 있다.

![[Pasted image 20231215163939.png]]
오프라인 상태에서 ’🐱🐱🐱’ 메세지를 보냈을 때 실패하지 않고, 다음과 같이 다시 인터넷에 연결되었을 때 완료된다.

![[Pasted image 20231215164002.png]]

## [[CS관련 예상 질문|돌아가기]]
---
#web
