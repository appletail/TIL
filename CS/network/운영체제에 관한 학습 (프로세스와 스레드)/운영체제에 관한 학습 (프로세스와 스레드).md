# 프로세스 (process)

## 컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램
- 메모리에 올라와 실행되고 있는 프로그램의 인스턴스이며 운영체제로부터 시스템 자원을 할당받는 작업의 단위
- 동적인 개념으로는 실행된 프로그램
---
## 1. 프로세스와 프로그램의 차이
- 프로그램: 보조 기억장치에 존재하며 실행되기를 기다리는 명령어와 정적인 데이터의 묶음
- 프로세스: 프로그램의 명령어와 정적 데이터가 자원을 할당받고 메모리에 적재되면 프로세스가 됨

## 2. 컴퓨터에 프로세스가 동시에 실행되는 이유
- 다중작업(multitasking_멀티태스킹)이라고 함
- 하나의 CPU는 하나의 프로세스만 실행할 수 있지만, 사람이 인지할 수 없는 속도로 CPU가 실행할 프로세스를 교체하고 있기 때문
- CPU가 여러개인 경우: 다중처리 시스템(Multiprocessing System_멀티프로세싱)

## 3. 프로세스의 메모리 공간(데이터와 명령어가 있는 공간)

![프로세스_메모리_공간](./%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4_%EB%A9%94%EB%AA%A8%EB%A6%AC_%EA%B3%B5%EA%B0%84.png)

- 컴파일 시에 지역변수를 얼마나 사용할지 미리 계산할 수 없기 때문에, 런타임에 지역변수 선언 순서에 따라 스택 영역은 위쪽으로 주소 값을 매기고, 동적 할당될 때 힙 영역은 아래쪽으로 주소값을 매김

## 4. 프로세스의 상태
- 커널 내에는 준비 큐, 대기 큐, 실행 큐 등의 자료 구조가 있으며 커널은 이것들을 이용하여 프로세스의 상태를 관리

- 생성(create)
  - 프로세스가 생성되는 중
- 실행(running)
  - 프로세스가 CPU를 차지하여 명령어들이 실행되고 있음
- 준비(ready)
  - 프로세스가 CPU를 사용하고 있지는 않지만 언제든지 사용할 수 있는 상태로, CPU가 할당되기를 기다리고 있음
  - 일반적으로 준비 상태의 프로세스 중 우선순위가 높은 프로세스가 CPU를 할당받음
- 대기(waiting)
  - 프로세스가 입출력 완료, 시그널 수신 등 어떤 사건을 기다리고 있는 상태를 말함
  - 보류(block)라고 부르기도 함 
- 종료(terminated)
  - 프로세스의 실행이 종료되었음


---


# 스레드 (thread)

## 어떠한 프로그램 내에서, 특히 프로세스 내에서 실행되는 흐름의 단위
- 일반적으로 한 프로그램은 하나의 스레드를 가지고 있음
- 멀티스레드(multithread): 프로그램 환경에 따라 둘 이상의 스레드를 동시에 실행할 수 있음
---
## 1. 프로세스와 스레드의 비교
- 멀티프로세스와 멀티스레드는 양쪽 모두 여러 흐름이 동시에 진행된다는 공통점을 가지고 있음
- 멀티프로세스: 각 프로세스는 독립적으로 실행되며 각각 별개의 메모리를 차지하고 있음
- 멀티스레드: 프로세스 내의 메모리를 공유해 사용
- 프로세스 간의 전환 속도보다 스레드 간의 전확 속도가 빠름

## 2. 멀티스레드의 장단점
### 장점
- CPU가 여러 개일 경우 각각의 CPU가 스레드 하나씩을 담당하는 방법으로 속도를 높일 수 있음
- 이러한 시스템에서는 여러 스레드가 실제 시간상으로 동시에 수행될 수 있음
### 단점
- 각각의 스레드 중 어떤 것이 먼저 실행될 지 그 순서를 알 수 없음

## 3. 스레드의 종류
- 사용자 레벨 스레드 (User-Level Thread)
  - 커널 영역의 상위에서 지원
  - 일반적으로 사용자 레벨의 라이브러리를 통해 구현
  - 라이브러리는 스레드의 생성 및 스케줄링 등에 관한 관리 기능을 제공
  - 동일한 메모리 영역에서 스레드가 생성 및 관리되므로 속도가 빠른 장점을 지님
  - 여러 개의 사용자 스레드 중 하나의 스레드가 시스템 호출 등으로 중단되면 나머지 모든 스레드 역시 중단되는 단점을 지님
    - 커널이 프로세스 내부의 스레드를 인식하지 못하여 해당 프로세스를 대기 상태로 전환시키기 때문
  
- 커널 레벨 스레드 (Kernel-Level Thread)
  - 운영체제가 지원하는 스레드 기능으로 구현
  - 커널이 스레드의 생성 및 스케줄링 등을 관리
  - 스레드가 시스템 호출 등으로 중단되더라도, 커널은 프로세스 내의 다른 스레드를 중단시키지 않고 계속 실행시켜줌
  - 다중처리(멀티프로세스) 환경에서 커널은 여러 개의 스레드를 각각 다른 처리기에 할당할수 있음
  - 사용자 스레드에 비해 생성 및 관리하는 것이 느림

## 4. 스레드 데이터
- 스레드 기본 데이터
  - 스레드는 자신만의 고유한 스레드 ID, 프로그램 카운터, 레지스터 집합, 스택을 가짐
  - 코드, 데이터, 파일 등 기타 자원은 프로세스 내의 다른 스레드와 공유

- 스레드 특정 데이터(Thread-Specific Data_TSD)
  - 기본 데이터 외에 하나의 스레드에만 연관된 데이터
  - 여러 개의 트랜잭션을 스레드로 처리할 경우, 각가의 트랜잭션 ID를 기억하고 있어야하는 경우와 같은 때에 필요
  - 여러 스레드 라이브러리들이 지원하는 기능 중의 하나